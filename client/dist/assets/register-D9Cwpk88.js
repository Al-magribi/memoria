import{u as e,a as s,i as a,j as r,y as n}from"./index-VcG33-XY.js";import{u as t,b as i}from"./vendor-aDN--sgP.js";import{M as l}from"./index-Dp7F7cCd.js";import"./iconBase-GrFdhYN9.js";const o=()=>{const o=t(),{user:m}=e(e=>e.user),[d,c]=i.useState(!1),[u,p]=i.useState({}),[h,{isLoading:f}]=s(),[N,x]=i.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",dateOfBirth:"",gender:"Prefer not to say"}),g=e=>{x({...N,[e.target.name]:e.target.value}),u[e.target.name]&&p({...u,[e.target.name]:""})};return i.useEffect(()=>{const e=()=>{c(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),i.useEffect(()=>{a()&&(null==m?void 0:m.id)&&o("/")},[m,o]),r.jsx("div",{className:"register d-flex-center",children:r.jsxs("div",{className:"wrapper",children:[r.jsx("h1",{children:d?"Welcome to Memoria":"Create Account"}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return N.username?N.username.length<3?e.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]{3,30}$/.test(N.username)||(e.username="Username can only contain letters, numbers, and underscores"):e.username="Username is required",N.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)||(e.email="Please enter a valid email address"):e.email="Email is required",N.password?N.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",N.confirmPassword?N.password!==N.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",N.firstName?N.firstName.length>50&&(e.firstName="First name must be less than 50 characters"):e.firstName="First name is required",N.lastName?N.lastName.length>50&&(e.lastName="Last name must be less than 50 characters"):e.lastName="Last name is required",p(e),0===Object.keys(e).length})())return;const s={username:N.username,email:N.email,password:N.password,firstName:N.firstName,lastName:N.lastName,dateOfBirth:N.dateOfBirth||void 0,gender:N.gender};try{await n.promise(h(s).unwrap(),{pending:"Creating your account...",success:{render:({data:e})=>(null==e?void 0:e.message)||"Account created successfully!"},error:{render({data:e}){var s;return(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Registration failed. Please try again."}}});setTimeout(()=>{o("/")},1500)}catch(a){console.error("Registration error:",a)}},children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",placeholder:"First Name *",name:"firstName",value:N.firstName,onChange:g,className:u.firstName?"error":"",disabled:f}),u.firstName&&r.jsx("span",{className:"error-text",children:u.firstName})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",placeholder:"Last Name *",name:"lastName",value:N.lastName,onChange:g,className:u.lastName?"error":"",disabled:f}),u.lastName&&r.jsx("span",{className:"error-text",children:u.lastName})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",placeholder:"Username *",name:"username",value:N.username,onChange:g,className:u.username?"error":"",disabled:f}),u.username&&r.jsx("span",{className:"error-text",children:u.username})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"email",placeholder:"Email *",name:"email",value:N.email,onChange:g,className:u.email?"error":"",disabled:f}),u.email&&r.jsx("span",{className:"error-text",children:u.email})]}),r.jsxs("div",{className:"form-row",children:[r.jsx("div",{className:"form-group",children:r.jsx("input",{type:"date",placeholder:"Date of Birth",name:"dateOfBirth",value:N.dateOfBirth,onChange:g,disabled:f})}),r.jsx("div",{className:"form-group",children:r.jsxs("div",{className:"select-wrapper",children:[r.jsxs("select",{name:"gender",value:N.gender,onChange:g,disabled:f,children:[r.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"}),r.jsx("option",{value:"Male",children:"Male"}),r.jsx("option",{value:"Female",children:"Female"}),r.jsx("option",{value:"Other",children:"Other"})]}),r.jsx(l,{className:"select-icon"})]})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"password",placeholder:"Password *",name:"password",value:N.password,onChange:g,className:u.password?"error":"",disabled:f}),u.password&&r.jsx("span",{className:"error-text",children:u.password})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"password",placeholder:"Confirm Password *",name:"confirmPassword",value:N.confirmPassword,onChange:g,className:u.confirmPassword?"error":"",disabled:f}),u.confirmPassword&&r.jsx("span",{className:"error-text",children:u.confirmPassword})]}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Creating Account...":"Create Account"}),r.jsxs("p",{className:"signin-link",children:["Already have an account?"," ",r.jsx("span",{onClick:()=>o("/signin"),children:"Sign in"})]})]})]})})};export{o as default};
//# sourceMappingURL=register-D9Cwpk88.js.map
