{"version":3,"file":"Friends-BkK0qZGn.js","sources":["../../src/components/search/UserSearch.jsx","../../src/pages/friend/Friends.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { FaSearch, FaUserPlus, FaSpinner } from \"react-icons/fa\";\r\nimport FriendButton from \"../friendbutton/FriendButton\";\r\nimport \"./userSearch.scss\";\r\n\r\nconst UserSearch = () => {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [hasSearched, setHasSearched] = useState(false);\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    if (!searchQuery.trim()) return;\r\n\r\n    setIsSearching(true);\r\n    setHasSearched(true);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/api/auth/search?q=${encodeURIComponent(searchQuery.trim())}`,\r\n        {\r\n          credentials: \"include\",\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data.users || []);\r\n      } else {\r\n        console.error(\"Search failed\");\r\n        setSearchResults([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error searching users:\", error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    if (!e.target.value.trim()) {\r\n      setSearchResults([]);\r\n      setHasSearched(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='user-search'>\r\n      <div className='search-header'>\r\n        <h2>Find People</h2>\r\n        <p>Search for people to connect with</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSearch} className='search-form'>\r\n        <div className='search-input-container'>\r\n          <FaSearch className='search-icon' />\r\n          <input\r\n            type='text'\r\n            placeholder='Search by name or username...'\r\n            value={searchQuery}\r\n            onChange={handleInputChange}\r\n            className='search-input'\r\n          />\r\n          <button\r\n            type='submit'\r\n            className='search-button'\r\n            disabled={isSearching || !searchQuery.trim()}\r\n          >\r\n            {isSearching ? <FaSpinner className='spinner' /> : \"Search\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className='search-results'>\r\n        {isSearching && (\r\n          <div className='loading-results'>\r\n            <FaSpinner className='spinner' />\r\n            <span>Searching...</span>\r\n          </div>\r\n        )}\r\n\r\n        {!isSearching && hasSearched && (\r\n          <>\r\n            {searchResults.length > 0 ? (\r\n              <div className='results-list'>\r\n                <h3>Search Results ({searchResults.length})</h3>\r\n                {searchResults.map((user) => (\r\n                  <div key={user._id} className='user-result'>\r\n                    <div className='user-info'>\r\n                      <img\r\n                        src={\r\n                          user.profilePicture ||\r\n                          \"https://via.placeholder.com/50\"\r\n                        }\r\n                        alt={`${user.firstName} ${user.lastName}`}\r\n                        className='user-avatar'\r\n                        onClick={() =>\r\n                          (window.location.href = `/user/${user._id}`)\r\n                        }\r\n                        style={{ cursor: \"pointer\" }}\r\n                      />\r\n                      <div className='user-details'>\r\n                        <h4\r\n                          onClick={() =>\r\n                            (window.location.href = `/user/${user._id}`)\r\n                          }\r\n                          style={{ cursor: \"pointer\" }}\r\n                        >\r\n                          {user.firstName} {user.lastName}\r\n                        </h4>\r\n                        <p className='username'>@{user.username}</p>\r\n                        {user.bio && <p className='bio'>{user.bio}</p>}\r\n                        {user.title && <p className='title'>{user.title}</p>}\r\n                      </div>\r\n                    </div>\r\n                    <div className='user-actions'>\r\n                      <FriendButton\r\n                        userId={user._id}\r\n                        className='search-friend-btn'\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className='no-results'>\r\n                <p>No users found matching \"{searchQuery}\"</p>\r\n                <p className='suggestion'>\r\n                  Try searching with a different name or username\r\n                </p>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {!hasSearched && !isSearching && (\r\n          <div className='search-tips'>\r\n            <h3>Search Tips</h3>\r\n            <ul>\r\n              <li>Search by first name, last name, or username</li>\r\n              <li>Try partial matches (e.g., \"john\" will find \"Johnny\")</li>\r\n              <li>Use exact spelling for better results</li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSearch;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../../components/layout/Layout\";\r\nimport { FaUserFriends, FaCheck, FaTimes, FaSearch } from \"react-icons/fa\";\r\nimport OnlineStatus from \"../../components/right/OnlineStatus\";\r\nimport \"../../components/right/OnlineStatus.scss\";\r\nimport UserSearch from \"../../components/search/UserSearch\";\r\nimport {\r\n  useGetFriendRequestsQuery,\r\n  useGetFriendsWithOnlineStatusQuery,\r\n  useAcceptFriendRequestMutation,\r\n  useRejectFriendRequestMutation,\r\n} from \"../../services/api/friendship/FriendshipApi\";\r\nimport \"./friends.scss\";\r\nimport Loading from \"../../components/loading/Loading\";\r\n\r\nconst Friends = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [loadingStates, setLoadingStates] = useState({});\r\n  const [activeTab, setActiveTab] = useState(\"friends\");\r\n\r\n  // API hooks\r\n  const { data: friendRequestsData, isLoading: isLoadingRequests } =\r\n    useGetFriendRequestsQuery();\r\n  const { data: friendsData, isLoading: isLoadingFriends } =\r\n    useGetFriendsWithOnlineStatusQuery();\r\n  const [acceptFriendRequest] = useAcceptFriendRequestMutation();\r\n  const [rejectFriendRequest] = useRejectFriendRequestMutation();\r\n\r\n  // Detect mobile device\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  // Handle friend request confirmation\r\n  const handleConfirm = async (friendshipId) => {\r\n    setLoadingStates((prev) => ({ ...prev, [friendshipId]: true }));\r\n\r\n    try {\r\n      await acceptFriendRequest(friendshipId);\r\n      console.log(`Confirmed friend request for ID: ${friendshipId}`);\r\n    } catch (error) {\r\n      console.error(\"Error accepting friend request:\", error);\r\n    } finally {\r\n      setLoadingStates((prev) => ({ ...prev, [friendshipId]: false }));\r\n    }\r\n  };\r\n\r\n  // Handle friend request rejection\r\n  const handleReject = async (friendshipId) => {\r\n    setLoadingStates((prev) => ({ ...prev, [friendshipId]: true }));\r\n\r\n    try {\r\n      await rejectFriendRequest(friendshipId);\r\n      console.log(`Rejected friend request for ID: ${friendshipId}`);\r\n    } catch (error) {\r\n      console.error(\"Error rejecting friend request:\", error);\r\n    } finally {\r\n      setLoadingStates((prev) => ({ ...prev, [friendshipId]: false }));\r\n    }\r\n  };\r\n\r\n  // Handle friend item click (for mobile navigation)\r\n  const handleFriendClick = (friendId) => {\r\n    if (isMobile) {\r\n      // Navigate to friend profile\r\n      window.location.href = `/user/${friendId}`;\r\n    }\r\n  };\r\n\r\n  if (isLoadingRequests || isLoadingFriends) {\r\n    return <Loading />;\r\n  }\r\n\r\n  const friendRequests = friendRequestsData?.requests || [];\r\n  const friends = friendsData?.friends || [];\r\n\r\n  // Separate online and offline friends\r\n  const onlineFriends = friends.filter((friend) => friend.isOnline);\r\n  const offlineFriends = friends.filter((friend) => !friend.isOnline);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className='friends'>\r\n        {/* Navigation Tabs */}\r\n        <div className='friends-nav'>\r\n          <button\r\n            className={`nav-tab ${activeTab === \"friends\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"friends\")}\r\n          >\r\n            <FaUserFriends />\r\n            Friends\r\n          </button>\r\n          <button\r\n            className={`nav-tab ${activeTab === \"search\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"search\")}\r\n          >\r\n            <FaSearch />\r\n            Find People\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content based on active tab */}\r\n        {activeTab === \"friends\" && (\r\n          <>\r\n            {friendRequests.length > 0 && (\r\n              <>\r\n                <h2 className='friends-title'>\r\n                  {isMobile ? \"Friend Requests\" : \"Friends Requests\"}\r\n                </h2>\r\n                <div className='friends-list'>\r\n                  {friendRequests.map((request) => (\r\n                    <div\r\n                      key={request.id}\r\n                      className='friend-item'\r\n                      onClick={() => handleFriendClick(request.requester.id)}\r\n                      style={{ cursor: isMobile ? \"pointer\" : \"default\" }}\r\n                    >\r\n                      <img\r\n                        className='friend-avatar'\r\n                        src={request.requester.profilePicture}\r\n                        alt={`${request.requester.firstName} ${request.requester.lastName}`}\r\n                        loading='lazy'\r\n                      />\r\n                      <div className='friend-info'>\r\n                        <div className='friend-name'>\r\n                          {request.requester.firstName}{\" \"}\r\n                          {request.requester.lastName}\r\n                        </div>\r\n                        <div className='friend-mutual'>\r\n                          <span className='mutual-icon'>\r\n                            <FaUserFriends />\r\n                          </span>\r\n                          {request.mutualFriendsCount} mutual friends\r\n                        </div>\r\n                        <div className='friend-actions'>\r\n                          <button\r\n                            className='accept-btn'\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleConfirm(request.id);\r\n                            }}\r\n                            disabled={loadingStates[request.id]}\r\n                          >\r\n                            {loadingStates[request.id] ? (\r\n                              <div className='loading-spinner'></div>\r\n                            ) : (\r\n                              <FaCheck />\r\n                            )}\r\n                            Accept\r\n                          </button>\r\n                          <button\r\n                            className='reject-btn'\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleReject(request.id);\r\n                            }}\r\n                            disabled={loadingStates[request.id]}\r\n                          >\r\n                            {loadingStates[request.id] ? (\r\n                              <div className='loading-spinner'></div>\r\n                            ) : (\r\n                              <FaTimes />\r\n                            )}\r\n                            Reject\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* Online Friends Section */}\r\n            {onlineFriends.length > 0 && (\r\n              <>\r\n                <h2 className='friends-title'>\r\n                  Online Friends ({onlineFriends.length})\r\n                </h2>\r\n                <div className='friends-list'>\r\n                  {onlineFriends.map((friend) => (\r\n                    <div\r\n                      key={friend.id}\r\n                      className='friend-item online'\r\n                      onClick={() => handleFriendClick(friend.id)}\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      <div className='friend-avatar-container'>\r\n                        <img\r\n                          className='friend-avatar'\r\n                          src={\r\n                            friend.profilePicture ||\r\n                            \"https://via.placeholder.com/50\"\r\n                          }\r\n                          alt={`${friend.firstName} ${friend.lastName}`}\r\n                          loading='lazy'\r\n                        />\r\n                        <OnlineStatus\r\n                          userId={friend.id}\r\n                          isOnlineFromAPI={friend.isOnline}\r\n                          size='small'\r\n                        />\r\n                      </div>\r\n                      <div className='friend-info'>\r\n                        <div className='friend-name'>\r\n                          {friend.firstName} {friend.lastName}\r\n                        </div>\r\n                        <div className='friend-status'>Online</div>\r\n                        <div className='friend-mutual'>\r\n                          <span className='mutual-icon'>\r\n                            <FaUserFriends />\r\n                          </span>\r\n                          {friend.mutualFriendsCount} mutual friends\r\n                        </div>\r\n                        {isMobile && (\r\n                          <div\r\n                            style={{\r\n                              fontSize: \"0.8rem\",\r\n                              color: \"#65676b\",\r\n                              marginTop: \"0.5rem\",\r\n                              fontStyle: \"italic\",\r\n                            }}\r\n                          >\r\n                            Tap to view profile\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* All Friends Section */}\r\n            <h2 className='friends-title'>All Friends ({friends.length})</h2>\r\n            <div className='friends-list'>\r\n              {friends.length > 0 ? (\r\n                friends.map((friend) => (\r\n                  <div\r\n                    key={friend.id}\r\n                    className={`friend-item ${\r\n                      friend.isOnline ? \"online\" : \"offline\"\r\n                    }`}\r\n                    onClick={() => handleFriendClick(friend.id)}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  >\r\n                    <div className='friend-avatar-container'>\r\n                      <img\r\n                        className='friend-avatar'\r\n                        src={\r\n                          friend.profilePicture ||\r\n                          \"https://via.placeholder.com/50\"\r\n                        }\r\n                        alt={`${friend.firstName} ${friend.lastName}`}\r\n                        loading='lazy'\r\n                      />\r\n                      {friend.isOnline && (\r\n                        <OnlineStatus\r\n                          userId={friend.id}\r\n                          isOnlineFromAPI={friend.isOnline}\r\n                          size='small'\r\n                        />\r\n                      )}\r\n                    </div>\r\n                    <div className='friend-info'>\r\n                      <div className='friend-name'>\r\n                        {friend.firstName} {friend.lastName}\r\n                      </div>\r\n                      <div className='friend-status'>\r\n                        {friend.isOnline ? \"Online\" : \"Offline\"}\r\n                      </div>\r\n                      <div className='friend-mutual'>\r\n                        <span className='mutual-icon'>\r\n                          <FaUserFriends />\r\n                        </span>\r\n                        {friend.mutualFriendsCount} mutual friends\r\n                      </div>\r\n                      {isMobile && (\r\n                        <div\r\n                          style={{\r\n                            fontSize: \"0.8rem\",\r\n                            color: \"#65676b\",\r\n                            marginTop: \"0.5rem\",\r\n                            fontStyle: \"italic\",\r\n                          }}\r\n                        >\r\n                          Tap to view profile\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className='no-friends'>\r\n                  <p>No friends yet</p>\r\n                  <p>Start connecting with people!</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {activeTab === \"search\" && <UserSearch />}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Friends;\r\n"],"names":["UserSearch","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","isSearching","setIsSearching","hasSearched","setHasSearched","jsxs","className","children","jsx","onSubmit","async","e","preventDefault","trim","response","fetch","encodeURIComponent","credentials","ok","data","json","users","console","error","FaSearch","jsxRuntimeExports","type","placeholder","value","onChange","target","disabled","FaSpinner","Fragment","length","map","user","src","profilePicture","alt","firstName","lastName","onClick","window","location","href","_id","style","cursor","username","bio","title","FriendButton","userId","Friends","isMobile","setIsMobile","loadingStates","setLoadingStates","activeTab","setActiveTab","friendRequestsData","isLoading","isLoadingRequests","useGetFriendRequestsQuery","friendsData","isLoadingFriends","useGetFriendsWithOnlineStatusQuery","acceptFriendRequest","useAcceptFriendRequestMutation","rejectFriendRequest","useRejectFriendRequestMutation","useEffect","checkMobile","innerWidth","addEventListener","removeEventListener","handleFriendClick","friendId","Loading","friendRequests","requests","friends","onlineFriends","filter","friend","isOnline","Layout","FaUserFriends","request","requester","id","loading","mutualFriendsCount","stopPropagation","friendshipId","prev","log","handleConfirm","FaCheck","handleReject","FaTimes","OnlineStatus","isOnlineFromAPI","size","fontSize","color","marginTop","fontStyle"],"mappings":"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"}