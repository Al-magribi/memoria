import{j as e,T as t}from"./index-DzKEBV7U.js";import{b as n,g as r,R as o,e as i}from"./vendor-aDN--sgP.js";import{g as a,c as s,h as l,F as c,i as u,j as f}from"./Layout-D5fUhYb-.js";const m=({comment:t,onReply:r,onDelete:o,onLike:i,currentUser:f})=>{var p;const[d,y]=n.useState(!1),[h,v]=n.useState(!1),[b,g]=n.useState(""),x=null==(p=t.likedBy)?void 0:p.includes(null==f?void 0:f.id);return e.jsxs("div",{className:"comment",children:[e.jsxs("div",{className:"comment-header",children:[e.jsx("img",{src:t.author.profilePicture,alt:"avatar",className:"comment-avatar"}),e.jsxs("div",{className:"comment-info",children:[e.jsx("span",{className:"comment-author",children:t.author.name}),e.jsx("span",{className:"comment-time",children:a(new Date(t.createdAt),{addSuffix:!0})})]}),(null==f?void 0:f.id)===t.author.id&&e.jsx("button",{className:"comment-delete",onClick:()=>o(t.id),children:e.jsx(s,{})})]}),e.jsx("div",{className:"comment-content",children:e.jsx("p",{children:t.content})}),e.jsxs("div",{className:"comment-actions",children:[e.jsxs("button",{className:"comment-action "+(x?"liked":""),onClick:()=>{i(t.id)},children:[x?e.jsx(l,{}):e.jsx(c,{}),e.jsx("span",{children:t.likes||0})," "]}),e.jsxs("button",{className:"comment-action",onClick:()=>v(!h),children:[e.jsx(u,{}),e.jsx("span",{children:"Reply"})]})]}),h&&e.jsxs("div",{className:"comment-reply-form",children:[e.jsx("textarea",{value:b,onChange:e=>g(e.target.value),placeholder:"Write a reply...",rows:"2"}),e.jsxs("div",{className:"comment-reply-actions",children:[e.jsx("button",{onClick:()=>{b.trim()&&(r(t.id,b),g(""),v(!1))},className:"reply-submit",children:"Reply"}),e.jsx("button",{onClick:()=>v(!1),className:"reply-cancel",children:"Cancel"})]})]}),t.replies&&t.replies.length>0&&e.jsxs("div",{className:"comment-replies",children:[e.jsx("button",{className:"show-replies-btn",onClick:()=>{y(!d)},children:d?"Hide":`Show ${t.replies.length} replies`}),d&&e.jsx("div",{className:"replies-list",children:t.replies.map(t=>e.jsx(m,{comment:t,onReply:r,onDelete:o,onLike:i,currentUser:f},t.id))})]})]})},p=({postId:t,comments:r=[],currentUser:o})=>{const[i,a]=n.useState(r),[s,l]=n.useState(!1),[c,u]=n.useState(""),[p,d]=n.useState(1e3),y=o||{id:1,name:"Current User",profilePicture:"https://images.pexels.com/photos/2092474/pexels-photo-2092474.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},h=(e,t)=>{const n={id:p,content:t,createdAt:(new Date).toISOString(),author:y,likes:0,likedBy:[],replies:[]},r=t=>t.map(t=>t.id===e?{...t,replies:[...t.replies||[],n]}:t.replies?{...t,replies:r(t.replies)}:t);a(r(i)),d(p+1)},v=e=>{const t=n=>n.filter(n=>n.id!==e&&(n.replies&&(n.replies=t(n.replies)),!0));a(t(i))},b=e=>{const t=n=>n.map(n=>{var r;if(n.id===e){const e=null==(r=n.likedBy)?void 0:r.includes(y.id);return{...n,likes:e?n.likes-1:n.likes+1,likedBy:e?n.likedBy.filter(e=>e!==y.id):[...n.likedBy||[],y.id]}}return n.replies?{...n,replies:t(n.replies)}:n});a(t(i))};return e.jsxs("div",{className:"comment-section",children:[e.jsxs("div",{className:"comment-toggle",onClick:()=>l(!s),children:[e.jsx(f,{}),e.jsxs("span",{children:[i.length," Comments"]})," "]}),s&&e.jsxs("div",{className:"comment-container",children:[e.jsxs("div",{className:"comment-input-section",children:[e.jsx("img",{src:y.profilePicture,alt:"avatar",className:"comment-input-avatar"}),e.jsxs("div",{className:"comment-input-wrapper",children:[e.jsx("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Write a comment...",rows:"2",className:"comment-input"}),e.jsx("button",{onClick:()=>{if(c.trim()){const e={id:p,content:c,createdAt:(new Date).toISOString(),author:y,likes:0,likedBy:[],replies:[]};a([...i,e]),d(p+1),u("")}},disabled:!c.trim(),className:"comment-submit",children:"Comment"})]})]}),e.jsx("div",{className:"comments-list",children:0===i.length?e.jsx("div",{className:"no-comments",children:e.jsx("p",{children:"No comments yet. Be the first to comment!"})}):i.map(t=>e.jsx(m,{comment:t,onReply:h,onDelete:v,onLike:b,currentUser:y},t.id))})]})]})};var d,y,h,v,b,g={exports:{}};function x(){if(y)return d;y=1;return d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function j(){if(v)return h;v=1;var e=x();function t(){}function n(){}return n.resetWarningCache=t,h=function(){function r(t,n,r,o,i,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function o(){return r}r.isRequired=r;var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}function w(){return b||(b=1,g.exports=j()()),g.exports}const S=r(w());var O=["date","verboseDate","tooltip","children"];function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e,t){var r=e.date,i=e.verboseDate,a=e.tooltip,s=e.children,l=k(e,O),c=n.useMemo(function(){return r.toISOString()},[r]);return o.createElement("time",T({ref:t},l,{dateTime:c,title:a?i:void 0}),s)}(D=o.forwardRef(D)).propTypes={date:S.instanceOf(Date).isRequired,verboseDate:S.string,tooltip:S.bool.isRequired,children:S.string.isRequired};var N=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function R(e,t){return e===t||!(!N(e)||!N(t))}function C(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!R(e[n],t[n]))return!1;return!0}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return"object"===("undefined"==typeof Intl?"undefined":I(Intl))&&"function"==typeof Intl.DateTimeFormat}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}return U(e,[{key:"get",value:function(){for(var e=this.cache,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,i=n;o<i.length;o++){var a=i[o];if("object"!==P(e))return;e=e[a]}return e}},{key:"put",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.pop(),o=t.pop(),i=this.cache,a=0,s=t;a<s.length;a++){var l=s[a];"object"!==P(i[l])&&(i[l]={}),i=i[l]}return i[o]=r}}]),e}(),E=new q,F=A(),L=function(e){return e.toString()};const M=function(e,t){void 0===t&&(t=C);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}(function(e,t){if(!F)return L;var n=function(e){var t=e.toString();if(V[t])return V[t];return V[t]=function(e){if(A())return Intl.DateTimeFormat.supportedLocalesOf(e)[0]}(e)}(e),r=JSON.stringify(t),o=E.get(String(n),r)||E.put(String(n),r,new Intl.DateTimeFormat(n,t));return function(e){return o.format(e)}});var V={};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return(t=e)instanceof Date||function(e){return"object"===B(e)&&"function"==typeof e.getTime}(t)?e:new Date(e);var t}var W=new q;var $,H,z={exports:{}},J={exports:{}},Y=J.exports;const G=r(function(){if(H)return z.exports;H=1;for(var e=($||($=1,function(){var e,t,n,r,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?J.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(J.exports=function(){return(e()-o)/1e6},t=process.hrtime,r=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),i=1e9*process.uptime(),o=r-i):Date.now?(J.exports=function(){return Date.now()-n},n=Date.now()):(J.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}.call(Y)),J.exports),t="undefined"==typeof window?i:window,n=["moz","webkit"],r="AnimationFrame",o=t["request"+r],a=t["cancel"+r]||t["cancelRequest"+r],s=0;!o&&s<n.length;s++)o=t[n[s]+"Request"+r],a=t[n[s]+"Cancel"+r]||t[n[s]+"CancelRequest"+r];if(!o||!a){var l=0,c=0,u=[],f=1e3/60;o=function(t){if(0===u.length){var n=e(),r=Math.max(0,f-(n-l));l=r+n,setTimeout(function(){var e=u.slice(0);u.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(r))}return u.push({handle:++c,callback:t,cancelled:!1}),c},a=function(e){for(var t=0;t<u.length;t++)u[t].handle===e&&(u[t].cancelled=!0)}}return z.exports=function(e){return o.call(t,e)},z.exports.cancel=function(){a.apply(t,arguments)},z.exports.polyfill=function(e){e||(e=t),e.requestAnimationFrame=o,e.cancelAnimationFrame=a},z.exports}());function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const X={instances:[],add:function(e){var t=this,n=0===this.instances.length;return ee(this.instances,e),n&&this.start(),{stop:function(){te(t.instances,e),0===t.instances.length&&t.stop()},forceUpdate:function(){Z(e,t.instances)}}},tick:function(){for(var e=Date.now();;){var t=this.instances[0];if(!(e>=t.nextUpdateTime))break;Z(t,this.instances)}},scheduleNextTick:function(){var e=this;this.scheduledTick=G(function(){e.tick(),e.scheduleNextTick()})},start:function(){this.scheduleNextTick()},stop:function(){G.cancel(this.scheduledTick)}};function Z(e,t){!function(e){var t=K(e.getNextValue(),2),n=t[0],r=t[1];e.setValue(n),e.nextUpdateTime=r}(e),te(t,e),ee(t,e)}function ee(e,t){var n=function(e,t){var n=t.nextUpdateTime;return function(e,t){if(0===e.length)return 0;for(var n,r=0,o=e.length-1;r<=o;){var i=t(e[n=Math.floor((o+r)/2)]);if(0===i)return n;if(i<0){if((r=n+1)>o)return r}else if((o=n-1)<r)return r}}(e,function(e){return e.nextUpdateTime===n?0:e.nextUpdateTime>n?1:-1})}(e,t);e.splice(n,0,t)}function te(e,t){var n=e.indexOf(t);e.splice(n,1)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e){var r=e.date,o=e.future,i=e.locale,a=e.locales,s=e.timeStyle,l=e.round,c=e.minTimeLeft,u=e.formatVerboseDate,f=e.verboseDateFormat,m=void 0===f?ae:f,p=e.updateInterval,d=e.tick,y=void 0===d||d,h=e.now,v=e.timeOffset,b=void 0===v?0:v,g=e.polyfill,x=n.useMemo(function(){return i&&(a=[i]),a.concat(t.getDefaultLocale())},[i,a]),j=n.useMemo(function(){return function(e,n){var r=n.polyfill,o=String(e)+":"+String(r);return W.get(o)||W.put(o,new t(e,{polyfill:r}))}(x,{polyfill:g})},[x,g]);r=n.useMemo(function(){return _(r)},[r]);var w=n.useCallback(function(){var e,t=(h||Date.now())-b;if(o&&t>=r.getTime()&&(t=r.getTime(),e=!0),void 0!==c){var n=r.getTime()-1e3*c;t>n&&(t=n,e=!0)}var i=ne(j.format(r,s,{getTimeToNextUpdate:!0,now:t,future:o,round:l}),2),a=i[0],u=i[1];return[a,t+(u=e?ie:p||u||6e4)]},[r,o,s,p,l,c,j,h]),S=n.useRef();S.current=w;var O=ne(n.useMemo(w,[]),2),T=O[0],k=O[1],D=ne(n.useState(T),2),N=D[0],R=D[1],C=n.useRef();n.useEffect(function(){if(y)return C.current=X.add({getNextValue:function(){return S.current()},setValue:R,nextUpdateTime:k}),function(){return C.current.stop()}},[y]),n.useEffect(function(){if(C.current)C.current.forceUpdate();else{var e=ne(w(),1)[0];R(e)}},[w]);var I=n.useMemo(function(){return M(x,m)},[x,m]),A=n.useMemo(function(){return u?u(r):I(r)},[r,u,I]);return{date:r,formattedDate:N,verboseDate:A}}var ie=31536e9,ae={weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},se=S.oneOfType,le=S.arrayOf,ce=S.string,ue=S.number,fe=S.shape,me=S.func,pe=se([fe({minTime:ue,formatAs:ce.isRequired}),fe({test:me,formatAs:ce.isRequired}),fe({minTime:ue,format:me.isRequired}),fe({test:me,format:me.isRequired})]),de=se([ce,fe({steps:le(pe).isRequired,labels:se([ce,le(ce)]).isRequired,round:ce})]),ye=["date","future","timeStyle","round","minTimeLeft","locale","locales","formatVerboseDate","verboseDateFormat","updateInterval","tick","now","timeOffset","polyfill","tooltip","component","container","wrapperComponent","wrapperProps"];function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function be(e){var t=e.date,n=e.future,r=e.timeStyle,i=e.round,a=e.minTimeLeft,s=e.locale,l=e.locales,c=void 0===l?[]:l,u=e.formatVerboseDate,f=e.verboseDateFormat,m=e.updateInterval,p=e.tick,d=e.now,y=e.timeOffset,h=e.polyfill,v=e.tooltip,b=void 0===v||v,g=e.component,x=void 0===g?D:g,j=e.container,w=e.wrapperComponent,S=e.wrapperProps,O=ve(e,ye),T=oe({date:t,future:n,timeStyle:r,round:i,minTimeLeft:a,locale:s,locales:c,formatVerboseDate:u,verboseDateFormat:f,updateInterval:m,tick:p,now:d,timeOffset:y,polyfill:h}),k=T.date,N=T.verboseDate,R=T.formattedDate,C=o.createElement(x,he({date:k,verboseDate:N,tooltip:b},O),R),I=w||j;return I?o.createElement(I,he({},S,{verboseDate:N}),C):C}be.propTypes={date:S.oneOfType([S.instanceOf(Date),S.number]).isRequired,locale:S.string,locales:S.arrayOf(S.string),future:S.bool,timeStyle:de,round:S.string,minTimeLeft:S.number,component:S.elementType,tooltip:S.bool,formatVerboseDate:S.func,verboseDateFormat:S.object,updateInterval:S.oneOfType([S.number,S.arrayOf(S.shape({threshold:S.number,interval:S.number.isRequired}))]),tick:S.bool,now:S.number,timeOffset:S.number,polyfill:S.bool,wrapperComponent:S.elementType,wrapperProps:S.object},be=o.memo(be);export{p as C,be as R};
//# sourceMappingURL=ReactTimeAgo-DGzZMxSf.js.map
